<!DOCTYPE html>
<html><head>
<meta name="google-site-verification" content="XrwF-xUZWSGJVBBm7jM8vqemVqx--zo5Tb9d-Vr7BCc" />
<title>RabbitMQËàáË®äÊÅØÁ¢∫Ë™ç</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="SpringBootÂæÆÊúçÂãôÈ†ÖÁõÆÁ≠ÜË®ò-18">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="RabbitMQËàáË®äÊÅØÁ¢∫Ë™ç" />
<meta property="og:description" content="SpringBootÂæÆÊúçÂãôÈ†ÖÁõÆÁ≠ÜË®ò-18" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yoziming.github.io/post/220204-gulimall-18-rabbitmq/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-04T00:00:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RabbitMQËàáË®äÊÅØÁ¢∫Ë™ç"/>
<meta name="twitter:description" content="SpringBootÂæÆÊúçÂãôÈ†ÖÁõÆÁ≠ÜË®ò-18"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="https://yoziming.github.io/images/favicon.png">



<link rel="stylesheet" href="https://yoziming.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://yoziming.github.io/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>











<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>





</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoziming.github.io/">
    
        <div class="nav-title">
            ÊüöÂ≠êËå∂ÂÆ§
        </div>
        
        <div class="nav-subtitle">
            Á¥ÄÈåÑËá™Â≠∏Â§ßÂ∞è‰∫ã
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/">
                È¶ñÈ†Åüè†
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Á≥ªÂàóÊñáüìñ
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Ê®ôÁ±§üè∑Ô∏è
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about-me">
                ÈóúÊñºÊàëüê£
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ÁßªÊ§çËá™ <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ÁõÆÈåÑ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#message-queue" onclick="onNavClick(`#message-queue-nav`)" id="message-queue-nav">
									Message Queue
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%9b%ae%e7%9a%84" onclick="onNavClick(`#ÁõÆÁöÑ-nav`)" id="ÁõÆÁöÑ-nav">
									ÁõÆÁöÑ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%90%8d%e8%a9%9e" onclick="onNavClick(`#ÂêçË©û-nav`)" id="ÂêçË©û-nav">
									ÂêçË©û
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#rabbitmq" onclick="onNavClick(`#rabbitmq-nav`)" id="rabbitmq-nav">
									RabbitMQ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%95%9f%e7%94%a8" onclick="onNavClick(`#ÂïüÁî®-nav`)" id="ÂïüÁî®-nav">
									ÂïüÁî®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#exchange%e9%a1%9e%e5%9e%8b" onclick="onNavClick(`#exchangeÈ°ûÂûã-nav`)" id="exchangeÈ°ûÂûã-nav">
									ExchangeÈ°ûÂûã
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%87%aa%e8%a8%82exchange" onclick="onNavClick(`#Ëá™Ë®Çexchange-nav`)" id="Ëá™Ë®Çexchange-nav">
									Ëá™Ë®ÇExchange
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%95%b4%e5%90%88spring" onclick="onNavClick(`#Êï¥Âêàspring-nav`)" id="Êï¥Âêàspring-nav">
									Êï¥ÂêàSpring
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%bd%ae" onclick="onNavClick(`#ÂâçÁΩÆ-nav`)" id="ÂâçÁΩÆ-nav">
									ÂâçÁΩÆ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b8%ac%e8%a9%a6%e5%89%b5%e5%bb%ba" onclick="onNavClick(`#Ê∏¨Ë©¶ÂâµÂª∫-nav`)" id="Ê∏¨Ë©¶ÂâµÂª∫-nav">
									Ê∏¨Ë©¶ÂâµÂª∫
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%99%bc%e8%a8%8a%e6%81%af" onclick="onNavClick(`#ÁôºË®äÊÅØ-nav`)" id="ÁôºË®äÊÅØ-nav">
									ÁôºË®äÊÅØ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8e%a5%e6%94%b6%e8%a8%8a%e6%81%af" onclick="onNavClick(`#Êé•Êî∂Ë®äÊÅØ-nav`)" id="Êé•Êî∂Ë®äÊÅØ-nav">
									Êé•Êî∂Ë®äÊÅØ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%a8%8a%e6%81%af%e7%a2%ba%e8%aa%8d" onclick="onNavClick(`#Ë®äÊÅØÁ¢∫Ë™ç-nav`)" id="Ë®äÊÅØÁ¢∫Ë™ç-nav">
									Ë®äÊÅØÁ¢∫Ë™ç
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%ac%ac%e4%b8%80%e6%ae%b5pb" onclick="onNavClick(`#Á¨¨‰∏ÄÊÆµpb-nav`)" id="Á¨¨‰∏ÄÊÆµpb-nav">
									Á¨¨‰∏ÄÊÆµP&gt;B
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%ac%ac%e4%ba%8c%e6%ae%b5eq" onclick="onNavClick(`#Á¨¨‰∫åÊÆµeq-nav`)" id="Á¨¨‰∫åÊÆµeq-nav">
									Á¨¨‰∫åÊÆµE&gt;Q
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%ac%ac%e4%b8%89%e6%ae%b5-%e6%b6%88%e8%b2%bb%e7%ab%af" onclick="onNavClick(`#Á¨¨‰∏âÊÆµ-Ê∂àË≤ªÁ´Ø-nav`)" id="Á¨¨‰∏âÊÆµ-Ê∂àË≤ªÁ´Ø-nav">
									Á¨¨‰∏âÊÆµ Ê∂àË≤ªÁ´Ø
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b0%bd%e6%94%b6" onclick="onNavClick(`#Á∞ΩÊî∂-nav`)" id="Á∞ΩÊî∂-nav">
									Á∞ΩÊî∂
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8b%92%e6%94%b6" onclick="onNavClick(`#ÊãíÊî∂-nav`)" id="ÊãíÊî∂-nav">
									ÊãíÊî∂
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%9c%80%e7%b5%82%e6%96%b9%e6%a1%88" onclick="onNavClick(`#ÊúÄÁµÇÊñπÊ°à-nav`)" id="ÊúÄÁµÇÊñπÊ°à-nav">
									ÊúÄÁµÇÊñπÊ°à
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/">
                    È¶ñÈ†Åüè†
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Á≥ªÂàóÊñáüìñ
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Ê®ôÁ±§üè∑Ô∏è
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about-me">
                    ÈóúÊñºÊàëüê£
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ÁõÆÈåÑ -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#message-queue" onclick="onNavClick(`#message-queue-nav`)" id="message-queue-nav">
									Message Queue
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%9b%ae%e7%9a%84" onclick="onNavClick(`#ÁõÆÁöÑ-nav`)" id="ÁõÆÁöÑ-nav">
									ÁõÆÁöÑ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%90%8d%e8%a9%9e" onclick="onNavClick(`#ÂêçË©û-nav`)" id="ÂêçË©û-nav">
									ÂêçË©û
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#rabbitmq" onclick="onNavClick(`#rabbitmq-nav`)" id="rabbitmq-nav">
									RabbitMQ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%95%9f%e7%94%a8" onclick="onNavClick(`#ÂïüÁî®-nav`)" id="ÂïüÁî®-nav">
									ÂïüÁî®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#exchange%e9%a1%9e%e5%9e%8b" onclick="onNavClick(`#exchangeÈ°ûÂûã-nav`)" id="exchangeÈ°ûÂûã-nav">
									ExchangeÈ°ûÂûã
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%87%aa%e8%a8%82exchange" onclick="onNavClick(`#Ëá™Ë®Çexchange-nav`)" id="Ëá™Ë®Çexchange-nav">
									Ëá™Ë®ÇExchange
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%95%b4%e5%90%88spring" onclick="onNavClick(`#Êï¥Âêàspring-nav`)" id="Êï¥Âêàspring-nav">
									Êï¥ÂêàSpring
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e7%bd%ae" onclick="onNavClick(`#ÂâçÁΩÆ-nav`)" id="ÂâçÁΩÆ-nav">
									ÂâçÁΩÆ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b8%ac%e8%a9%a6%e5%89%b5%e5%bb%ba" onclick="onNavClick(`#Ê∏¨Ë©¶ÂâµÂª∫-nav`)" id="Ê∏¨Ë©¶ÂâµÂª∫-nav">
									Ê∏¨Ë©¶ÂâµÂª∫
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%99%bc%e8%a8%8a%e6%81%af" onclick="onNavClick(`#ÁôºË®äÊÅØ-nav`)" id="ÁôºË®äÊÅØ-nav">
									ÁôºË®äÊÅØ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8e%a5%e6%94%b6%e8%a8%8a%e6%81%af" onclick="onNavClick(`#Êé•Êî∂Ë®äÊÅØ-nav`)" id="Êé•Êî∂Ë®äÊÅØ-nav">
									Êé•Êî∂Ë®äÊÅØ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e8%a8%8a%e6%81%af%e7%a2%ba%e8%aa%8d" onclick="onNavClick(`#Ë®äÊÅØÁ¢∫Ë™ç-nav`)" id="Ë®äÊÅØÁ¢∫Ë™ç-nav">
									Ë®äÊÅØÁ¢∫Ë™ç
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%ac%ac%e4%b8%80%e6%ae%b5pb" onclick="onNavClick(`#Á¨¨‰∏ÄÊÆµpb-nav`)" id="Á¨¨‰∏ÄÊÆµpb-nav">
									Á¨¨‰∏ÄÊÆµP&gt;B
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%ac%ac%e4%ba%8c%e6%ae%b5eq" onclick="onNavClick(`#Á¨¨‰∫åÊÆµeq-nav`)" id="Á¨¨‰∫åÊÆµeq-nav">
									Á¨¨‰∫åÊÆµE&gt;Q
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%ac%ac%e4%b8%89%e6%ae%b5-%e6%b6%88%e8%b2%bb%e7%ab%af" onclick="onNavClick(`#Á¨¨‰∏âÊÆµ-Ê∂àË≤ªÁ´Ø-nav`)" id="Á¨¨‰∏âÊÆµ-Ê∂àË≤ªÁ´Ø-nav">
									Á¨¨‰∏âÊÆµ Ê∂àË≤ªÁ´Ø
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b0%bd%e6%94%b6" onclick="onNavClick(`#Á∞ΩÊî∂-nav`)" id="Á∞ΩÊî∂-nav">
									Á∞ΩÊî∂
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8b%92%e6%94%b6" onclick="onNavClick(`#ÊãíÊî∂-nav`)" id="ÊãíÊî∂-nav">
									ÊãíÊî∂
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%9c%80%e7%b5%82%e6%96%b9%e6%a1%88" onclick="onNavClick(`#ÊúÄÁµÇÊñπÊ°à-nav`)" id="ÊúÄÁµÇÊñπÊ°à-nav">
									ÊúÄÁµÇÊñπÊ°à
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoziming.github.io/">
            ÊüöÂ≠êËå∂ÂÆ§
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoziming.github.io/">
        <div class="single-column-header-title">ÊüöÂ≠êËå∂ÂÆ§</div>
        
        <div class="single-column-header-subtitle">Á¥ÄÈåÑËá™Â≠∏Â§ßÂ∞è‰∫ã</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoziming.github.io/images/rabbitmq.jpg')"
                    
                
            >
                <div class="post-title">
                    RabbitMQËàáË®äÊÅØÁ¢∫Ë™ç
                    
                    <div class="post-subtitle">
                        SpringBootÂæÆÊúçÂãôÈ†ÖÁõÆÁ≠ÜË®ò-18
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2022-02-04 00:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/java%E5%BE%AE%E6%9C%8D%E5%8B%99%E5%95%86%E5%9F%8E%E9%A0%85%E7%9B%AE">JavaÂæÆÊúçÂãôÂïÜÂüéÈ†ÖÁõÆ</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">java</a>
                                &nbsp;
                            
                                <a href="/tags/mq">mq</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="message-queue">Message Queue</h1>
<blockquote>
<p><em>Message queue</em> Ë®äÊÅØ‰ΩáÂàó</p>
</blockquote>
<ul>
<li><em>‰ΩáÂàó</em>ÔºàqueueÔºâÔºåÂèàÁ®±ÁÇ∫ÈöäÂàóÔºåÁâπÊÄßÊòØÂÖàÈÄ≤ÂÖàÂá∫(FIFO)</li>
<li>Ë®äÊÅØ‰ΩáÂàóÊòØ‰∏ÄÂÄã‰∏≠Èñì‰ª∂ÔºåÂèàÊòØÁ∂ìÂÖ∏ÁöÑ&quot;Âä†‰∏ÄÂ±§&quot;Êìç‰ΩúÔºåÊäΩÂá∫‰∏ÄÂÄãÂ∞àÈñÄÂ≠òÊîæÊ∫ùÈÄöË®äÊÅØÁöÑÂú∞ÊñπÔºåÂ∞±ÊòØË®äÊÅØ‰ΩáÂàó
<ul>
<li>ÂèØ‰ª•ÁêÜËß£ÊàêÂéªÈäÄË°åËæ¶‰∫ãÔºåÈÇ£ÂÄãÈ†òËôüÁ¢ºÁâåÁöÑÊ©üÂô®</li>
</ul>
</li>
<li>Â∏ÇÈù¢‰∏äÂ∏∏Ë¶ãÁöÑMQ: ActiveMQ„ÄÅRabbitMQ„ÄÅRocketMQ„ÄÅKafka</li>
</ul>
<h2 id="ÁõÆÁöÑ">ÁõÆÁöÑ</h2>
<ul>
<li>Á∏ÆÁü≠Ë™øÁî®ÊôÇÈñì: ÈÄèÈÅéÂ∫èÂàóÂàÜÁôºÂæåÁ∫åÁöÑÁï∞Ê≠•Ë™øÁî®Ôºå‰∏çÈúÄË¶Å‰∏ÄÊ≠•‰∏ÄÊ≠•ÂæÄ‰∏ãËµ∞Á≠âËøîÂõû
<ul>
<li>Â∞±ÂÉèÂéªÈÜ´Èô¢ÔºåÈÜ´ÁîüÈñã‰∫ÜÊ™¢Êü•Ë¶Å‰Ω†ÂéªÊäΩË°ÄË∑üÁÖßXÂÖâÔºåÂì™ÈÇäÊñπ‰æøÂ∞±ÂÖàÂéªÂÅöÔºåÁ∏Ω‰πãÊ™¢Êü•ÂñÆÈñã‰∫ÜÈÜ´ÁîüÂ∞±‰∏çÁÆ°‰∫ÜÔºå‰Ω†Á∏ΩÊúÉÂéªÂÅöÂÆåÊ™¢Êü•</li>
</ul>
</li>
</ul>
<p><img src="image-20220127212728258.png" alt="image-20220127212728258"></p>
<ul>
<li>Ëß£ËÄ¶: Ê®°ÁµÑÈñìÊ∫ùÈÄöÁî®Ë®ÇÈñ±‰ΩáÂàóÁöÑÂΩ¢ÂºèÔºåÂè™ÈúÄË¶ÅÈóúÊ≥®Êî∂ÁôºË®äÊÅØÔºåÊ∏õÂ∞ëÊ•≠ÂãôÈÇèËºØÁöÑ‰æµÂÖ•
<ul>
<li>ÊØîÂ¶ÇÂà∞‰∫ÜÊäΩË°ÄÁ´ôÔºåÊãøÊ™¢È©óÂñÆÂéªÊéÉÊ©üÂô®Â∞±ËÉΩÂÆåÊàêÊäΩË°ÄÂ†±ÂêçÔºå‰∏çÈúÄË¶ÅÈÜ´ÁîüÊâìÈõªË©±ÂëäÁü•ÊäΩË°ÄÁ´ôË™∞Ë¶ÅÊäΩ‰ªÄÈ∫ºË°Ä</li>
</ul>
</li>
</ul>
<p><img src="image-20220127213129008.png" alt="image-20220127213129008"></p>
<ul>
<li>ÂâäÂ≥∞: ÊµÅÈáèÊéßÂà∂ÔºåÈåØÈñãÈ´ò‰ΩµÁôºÔºå‰æùÈ†ÜÂ∫èËôïÁêÜ
<ul>
<li>ÈöäÂàóÊòØÊúâÂ∫è„ÄÅÂèØÊéßÂà∂ÊµÅÈáèÁöÑÔºå‰∏çÊúÉÁ™ÅÁÑ∂1000‰∫∫Êì†ÁàÜÊäΩË°ÄÁ´ô</li>
</ul>
</li>
</ul>
<p><img src="image-20220127213027170.png" alt="image-20220127213027170"></p>
<h2 id="ÂêçË©û">ÂêçË©û</h2>
<ul>
<li>
<p>Ê∂àÊÅØ‰ª£ÁêÜÔºàmessage brokerÔºâ: ÂÆâË£ù‰∫ÜÊ∂àÊÅØ‰∏≠Èñì‰ª∂ÁöÑ‰º∫ÊúçÂô®ÔºåÁôºÈÄÅÊ∂àÊÅØÂíåÊé•Êî∂Ê∂àÊÅØÈÉΩË¶ÅÈÄ£‰∏äÂÆÉ</p>
<ul>
<li>ÂÜíÈö™ËÄÖÂÖ¨ÊúÉÁöÑ‰ªªÂãôÁúãÊùø</li>
</ul>
</li>
<li>
<p>ÁõÆÁöÑÂú∞ÔºàdestinationÔºâ: ÁõÆÁöÑÂú∞Ë°®Á§∫ÁîüÁî¢ËÄÖÁôºÈÄÅÊ∂àÊÅØÁµ¶Ê∂àÊÅØ‰ª£ÁêÜ‰πãÂæåÔºåÊòØÂ≠òÂÑ≤Âà∞Ê∂àÊÅØ‰ª£ÁêÜ‰∏≠Âì™‰∏ÄÂÄãÂÖ∑È´îÁöÑÁõÆÁöÑÂú∞ÔºàÈöäÂàóÊàñ‰∏ªÈ°åÔºâ</p>
<ul>
<li>
<p>ÈöäÂàóÔºàqueueÔºâÔºöÈªûÂ∞çÈªûÈÄö‰ø°Ôºå1ÂÄãÁôºÈÄÅËÄÖÔºånÂÄãÊé•ÂèóËÄÖÔºå‰ΩÜ‰∏ÄÂÄã‰ø°ÊÅØÂè™ÊúÉË¢´‰∏ÄÂÄãÊé•ÂèóËÄÖÊ∂àË≤ªÔºàÊ∂àË≤ªÂæåÁßªÂá∫ÈöäÂàóÔºâ</p>
<ul>
<li>ÁêÜËß£ÁÇ∫ÊããÁπ°ÁêÉ</li>
</ul>
</li>
<li>
<p>‰∏ªÈ°åÔºàtopicÔºâÔºöÁôº‰Ωà/Ë®ÇÈñ≤ÔºåÂ§öÂÄãÁôºÈÄÅËÄÖ+Â§öÂÄãË®ÇÈñ≤ËÄÖ„ÄÇÂ§öÂÄãË®ÇÈñ≤ËÄÖÊúÉÂêåÊôÇÊé•Êî∂Âà∞</p>
<ul>
<li>Âª£Êí≠</li>
</ul>
</li>
</ul>
</li>
<li>
<p>JMS (Java Message Service): Âü∫ÊñºJAVA APIÂÆöÁæ©ÁöÑÊ®ôÊ∫ñ‰ªãÈù¢</p>
<ul>
<li>
<p>È°û‰ººJDBCËàáË≥áÊñôÂ∫´Âª†ÂïÜ‰πãÈñìÁöÑÈóú‰øÇ</p>
</li>
<li>
<p>ActiveMQ„ÄÅHornetMQÊòØJMSÂØ¶Áèæ</p>
</li>
<li>
<blockquote>
<p>ÂèÉËÄÉ <a href="https://openhome.cc/Gossip/EJB3Gossip/JavaMessageService.html">https://openhome.cc/Gossip/EJB3Gossip/JavaMessageService.html</a></p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>AMQP(Advanced Message Queuing Protocol)</p>
<ul>
<li>È´òÁ¥öÊ∂àÊÅØÈöäÂàóÂçîË≠∞Ôºå‰πüÊòØ‰∏ÄÂÄãÊ∂àÊÅØ‰ª£ÁêÜÁöÑË¶èÁØÑÔºåÂÖºÂÆπJMS</li>
<li>RabbitMQÊòØAMQPÁöÑÂØ¶Áèæ</li>
</ul>
</li>
<li>
<p>‰∏çÁÆ°JMSÊàñAMQPÔºåSpringÈÉΩÊúâÊèê‰æõÊîØÊåÅÔºåÂè™Ë¶ÅÂØ¶ÁèæConnectionFactory‰æÜÈÄ£Êé•Ê∂àÊÅØ‰ª£ÁêÜÔºåSpring Boot‰πüÈÉΩÊúâËá™ÂãïÈÖçÁΩÆ</p>
<ul>
<li>SpringÁúüÁöÑÊòØÁÑ°ÊïµÔºå‰∏ÄÁµ±JavaÊ±üÊπñ</li>
</ul>
</li>
</ul>
<h1 id="rabbitmq">RabbitMQ</h1>
<blockquote>
<p>ÈÄô‰∏ÄPartË¨õÁöÑË∂ÖÊ∏ÖÊô∞ÔºåË¨õÁöÑÂ§™Â•Ω‰∫Ü <a href="https://www.bilibili.com/video/BV1np4y1C7Yf?p=250&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1np4y1C7Yf?p=250&amp;spm_id_from=pageDriver</a></p>
</blockquote>
<p><img src="image-20220126230205048.png" alt="image-20220126230205048"></p>
<ul>
<li>publisherÁôºÈÄÅmessage</li>
<li>messageÁî±Ê∂àÊÅØÈ†≠ + Ê∂àÊÅØÈ´îÁµÑÊàê(È°û‰ººHTTP)ÔºåÁôºÈÄÅÂà∞Message BrokerÊ∂àÊÅØ‰ª£ÁêÜ‰º∫ÊúçÂô®‰∏ä</li>
<li>Âú®Broker‰∏≠ÔºåExchange‰∫§ÊèõÊ©üÁ∂ÅÂÆöQueueÔºå‰∏¶Ë≠òÂà•route key(Ê∂àÊÅØË¶ÅÂéªÂì™)</li>
<li>Ê∂àË≤ªËÄÖË®ÇÈñ±ÈöäÂàóÔºåÂª∫Á´ã‰∏ÄÊ¢ùConnectionÈï∑ÈÄ£Êé•(ÈÄ£Êé•‰∏äÈñãÈó¢ÊúâÂ§öÊ¢ùchannel‰ø°ÈÅì)
<ul>
<li>È°û‰ººÈ´òÈÄüÂÖ¨Ë∑ØÊúâ6ËªäÈÅìÈÇ£Ê®£</li>
<li>Èï∑ÈÄ£Êé•ËÉΩÁõ£ËÅΩÊ∂àË≤ªËÄÖÊòØÂê¶Êñ∑ÈñãÔºåÂ¶ÇÊûúÊñ∑Èñã‰∫ÜÂ∞±ÂõûÊî∂Ê∂àÊÅØÔºå‰∏çËá≥Êñº‰∏üÂ§±</li>
</ul>
</li>
<li>Âú®Broker‰∏≠ÔºåExchangeËàáQueueÂèØ‰ª•ÁµÑÊàêVHostËôõÊì¨‰∏ªÊ©üÔºåÈ°û‰ººÂëΩÂêçÁ©∫Èñì‰∫íÁõ∏ÈöîÈõ¢ÔºåÂèØ‰ª•Áî®‰æÜÂçÄÂàÜ‰∏çÂêåÂπ≥Âè∞ÊàñÊòØdevËàápub</li>
</ul>
<h2 id="ÂïüÁî®">ÂïüÁî®</h2>
<blockquote>
<p>ÂÆòÊñπ: <a href="https://www.rabbitmq.com/networking.html">https://www.rabbitmq.com/networking.html</a></p>
</blockquote>
<pre tabindex="0"><code>docker run -d --name rabbitmq --restart=always -p 5671:5671 -p 5672:5672 -p 4369:4369 -p 25672:25672 -p 15671:15671 -p 15672:15672 rabbitmq:management
</code></pre><ul>
<li>
<p>ÈÄôÊòØÁ´†È≠ö‰∏çÊòØÂÖîÂ≠êÂêßÔºåÈÄôÈ∫ºÂ§öÁ´ØÂè£</p>
<ul>
<li>4369,25672(ErlangÁôºÁèæ&amp;ÈõÜÁæ§Á´ØÂè£)</li>
<li>5672,5671(AMQPÁ´ØÂè£)</li>
<li>15672(webÁÆ°ÁêÜÂæåÂè∞Á´ØÂè£)</li>
<li>61613,61614(STOMPÂçîË≠∞Á´ØÂè£)</li>
<li>1883,8883(MQTTÂçîË≠∞Á´ØÂè£)</li>
</ul>
</li>
<li>
<p>ÁÆ°ÁêÜÈ†ÅÈù¢: http://localhost:15672</p>
<ul>
<li>È†êË®≠Â∏≥ËôüÂØÜÁ¢ºÈÉΩÊòØ <code>guest</code></li>
</ul>
</li>
</ul>
<h2 id="exchangeÈ°ûÂûã">ExchangeÈ°ûÂûã</h2>
<ul>
<li>
<p>direct: Áõ¥Êé•È°ûÂûãÔºåÊåâÁÖßË∑ØÁî±ÈçµÁ≤æÁ¢∫‰∏ÄÂ∞ç‰∏ÄÂåπÈÖç</p>
</li>
<li>
<p>fanout: Âª£Êí≠È°ûÂûãÔºåÊúâÁ∂ÅÂÆöÂ∞±ÁôºÔºåÁÑ°Ë´ñË∑ØÁî±ÈçµÔºåÊúÄÂø´</p>
</li>
<li>
<p>topic: ‰∏ªÈ°åÈ°ûÂûãÔºåÁî®È°û‰ººÈÄöÈÖçÁ¨¶ÁöÑË¶èÂâáÂåπÈÖç</p>
<ul>
<li><code>*</code>: ÂøÖÈ†àÊúâ‰∏ÄÂÄãÂñÆË©û</li>
</ul>
<ul>
<li><code>#</code>: 0ÂÄãÊàñÂ§öÂÄãÂñÆË©û</li>
</ul>
</li>
</ul>
<p><img src="image-20220126235029445.png" alt="image-20220126235029445"></p>
<h3 id="Ëá™Ë®Çexchange">Ëá™Ë®ÇExchange</h3>
<ul>
<li>ÂëΩÂêçÊúÄÂ•ΩÂú®Â∞æÈÉ®Â∏∂‰∏äÈ°ûÂûã</li>
</ul>
<p><img src="image-20220126235605507.png" alt="image-20220126235605507"></p>
<ul>
<li>Êé•ËëóÁµ¶‰∫§ÊèõÊ©üÁ∂ÅÂÆöÈöäÂàóÔºåÁ∂ÅÂÆö‰πãÂâçÔºåË¶ÅÂÖàÊúâÈöäÂàóÔºåÈÄôÈÇäÂâµ</li>
</ul>
<p><img src="image-20220126235816493.png" alt="image-20220126235816493"></p>
<ul>
<li>Êé•ËëóÁ∂ÅÂÆö
<ul>
<li>‰∫§ÊèõÊ©ü‰πüÂèØ‰ª•Á∂Å‰∫§ÊèõÊ©üÔºåÂΩ¢ÊàêÂ§öÂ±§Ê¨°Èóú‰øÇ</li>
<li>Ë®òÂæóÊåáÂÆöroute key</li>
</ul>
</li>
</ul>
<p><img src="image-20220127000338395.png" alt="image-20220127000338395"></p>
<h1 id="Êï¥Âêàspring">Êï¥ÂêàSpring</h1>
<h2 id="ÂâçÁΩÆ">ÂâçÁΩÆ</h2>
<ul>
<li>ÂºïÂåÖ</li>
</ul>
<pre tabindex="0"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><ul>
<li>application.properties</li>
</ul>
<pre tabindex="0"><code class="language-properties" data-lang="properties"># MQ
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.virtual-host=/
</code></pre><ul>
<li>ÂïüÂãïÈ°ûË®ªËß£ <code>@EnableRabbit</code></li>
</ul>
<pre tabindex="0"><code>@EnableRabbitË®ªËß£‰ΩøRabbitAutoConfigurationÁîüÊïàÔºåËá™ÂãïÈÖçÁΩÆ‰∫Ü:
	RabbitTemplate
	AmqpAdmin
	CachingConnectionFactory
	RabbitMessagingTemplate
</code></pre><h2 id="Ê∏¨Ë©¶ÂâµÂª∫">Ê∏¨Ë©¶ÂâµÂª∫</h2>
<ul>
<li>ÂâµÂª∫Exchanger„ÄÅQueue„ÄÅBindingÈÄô‰∫õÂèÉÊï∏ËàáÈÇèËºØÈÉΩË∑üÂú®Á∂≤È†Å‰∏äÊìç‰Ωú‰∏ÄÊ®£</li>
<li>ÂÖàÊ≥®ÂÖ•‰∏ÄÂÄã<code>AmqpAdmin</code>ÔºåÁî±ÂÆÉ<code>declare</code>ÂÆåÊàêÂâµÂª∫</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Slf4j</span>
<span style="color:#707a7c">@SpringBootTest</span>
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">OrderApplicationTests</span> {

    <span style="color:#707a7c">@Autowired</span>
    AmqpAdmin amqpAdmin;

    <span style="color:#707a7c">@Test</span>
    <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">createExchange</span>() {
        <span style="color:#228b22">// ÂêçÁ®±, ÊåÅ‰πÖ, Ëá™ÂãïÂà™
</span><span style="color:#228b22"></span>        DirectExchange directExchange = <span style="color:#8b008b;font-weight:bold">new</span> DirectExchange(<span style="color:#cd5555">&#34;hello-exchange&#34;</span>, <span style="color:#8b008b;font-weight:bold">true</span>, <span style="color:#8b008b;font-weight:bold">false</span>);
        amqpAdmin.<span style="color:#658b00">declareExchange</span>(directExchange);
        log.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;Exchange[{}]ÂâµÂª∫ÊàêÂäü&#34;</span>, <span style="color:#cd5555">&#34;hello-exchange&#34;</span>);
    }

    <span style="color:#707a7c">@Test</span>
    <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">createQueue</span>() {
        <span style="color:#228b22">// import org.springframework.amqp.core.Queue;
</span><span style="color:#228b22"></span>        <span style="color:#228b22">// Á¨¨‰∏âÂÄãÂèÉÊï∏ Êéí‰ªñÔºåËã•trueË°®Á§∫ÈöäÂàóÂè™ËÉΩË¢´ËÅ≤ÊòéÁöÑÈÄ£Êé•Á∂ÅÂÆöÔºåÂÖ∂‰ªñ‰∫∫Á∂Å‰∏ç‰∏ä
</span><span style="color:#228b22"></span>        amqpAdmin.<span style="color:#658b00">declareQueue</span>(<span style="color:#8b008b;font-weight:bold">new</span> Queue(<span style="color:#cd5555">&#34;hello-queue&#34;</span>, <span style="color:#8b008b;font-weight:bold">true</span>, <span style="color:#8b008b;font-weight:bold">false</span>, <span style="color:#8b008b;font-weight:bold">false</span>));
        log.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;QueueÂâµÂª∫[{}]ÊàêÂäü&#34;</span>, <span style="color:#cd5555">&#34;hello-queue&#34;</span>);
    }

    <span style="color:#707a7c">@Test</span>
    <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">createBinding</span>() {
        <span style="color:#228b22">// String destinationÁõÆÁöÑÂú∞ÔºåÈöäÂàónameÊàñ ‰∫§ÊèõÊ©üname
</span><span style="color:#228b22"></span>        <span style="color:#228b22">// Binding.DestinationType destinationTypeÁõÆÁöÑÂú∞È°ûÂûã queueÈÇÑÊòØexchange
</span><span style="color:#228b22"></span>        <span style="color:#228b22">// String exchange ‰∫§ÊèõÊ©ü
</span><span style="color:#228b22"></span>        <span style="color:#228b22">// String routingKey Ë∑ØÁî±Èçµ
</span><span style="color:#228b22"></span>        <span style="color:#228b22">// @Nullable Map&lt;String, Object&gt; arguments Ëá™ÂÆöÁæ©ÂèÉÊï∏
</span><span style="color:#228b22"></span>        amqpAdmin.<span style="color:#658b00">declareBinding</span>(<span style="color:#8b008b;font-weight:bold">new</span> Binding(<span style="color:#cd5555">&#34;hello-queue&#34;</span>, Binding.<span style="color:#658b00">DestinationType</span>.<span style="color:#658b00">QUEUE</span>,<span style="color:#cd5555">&#34;hello-exchange&#34;</span>,
                <span style="color:#cd5555">&#34;hello.java&#34;</span>, <span style="color:#8b008b;font-weight:bold">null</span>));
        log.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;BindingÂâµÂª∫[{}]ÊàêÂäü&#34;</span>, <span style="color:#cd5555">&#34;hello-binding&#34;</span>);
    }
}
</code></pre></div><h2 id="ÁôºË®äÊÅØ">ÁôºË®äÊÅØ</h2>
<ul>
<li>Ê≥®ÂÖ•<code>RabbitTemplate</code>Ôºå‰ΩøÁî®<code>convertAndSend</code>ÊñπÊ≥ï
<ul>
<li>ËÉΩÊé•Êî∂ObjectÔºåÁõ¥Êé•ËΩâÊàêÊµÅÁôºÂá∫Âéª</li>
<li>Ëã•ÊÉ≥ÁîüÁôº‰∏ÄÂÄãÁâ©‰ª∂ÔºåË©≤Áâ©‰ª∂ÁöÑÈ°ûË¶ÅÂØ¶ÁèæÂ∫èÂàóÂåñ <code>implments Serializable</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Autowired</span>
RabbitTemplate rabbitTemplate;

<span style="color:#707a7c">@Test</span>
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">send</span>() {
    String msg = <span style="color:#cd5555">&#34;‰∏ÄÊ¢ùË®äÊÅØ&#34;</span>;
    rabbitTemplate.<span style="color:#658b00">convertAndSend</span>(<span style="color:#cd5555">&#34;hello-exchange&#34;</span>, <span style="color:#cd5555">&#34;hello.java&#34;</span>, msg);
}
</code></pre></div><ul>
<li>ÂØ¶Âãô‰∏äÈÇÑÊòØËΩâJSONÂêßÔºåÈúÄË¶Å‰∏ÄÂÄãÈÖçÁΩÆÈ°û
<ul>
<li>Ê≥®ÊÑèÂºïÁöÑÂåÖÊòØ<code>amqp.support.converter</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.amqp.support.converter.MessageConverter</span>;

<span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyRabbitConfig</span> {
    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> MessageConverter <span style="color:#008b45">messageConverter</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> Jackson2JsonMessageConverter();
    }
}
</code></pre></div><ul>
<li>ÁôºÈÄÅ‰∏ÄÂÄãËá™Ë®ÇÈ°ûRefundInfoEntity</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Test</span>
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">send</span>() {
      <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = 0; i &lt; 5; i++) {
        RefundInfoEntity refundInfoEntity = <span style="color:#8b008b;font-weight:bold">new</span> RefundInfoEntity();
        refundInfoEntity.<span style="color:#658b00">setRefundContent</span>(<span style="color:#cd5555">&#34;test&#34;</span> + i);
        rabbitTemplate.<span style="color:#658b00">convertAndSend</span>(<span style="color:#cd5555">&#34;hello-exchange&#34;</span>, <span style="color:#cd5555">&#34;hello.java&#34;</span>, refundInfoEntity);
    }
}
</code></pre></div><h2 id="Êé•Êî∂Ë®äÊÅØ">Êé•Êî∂Ë®äÊÅØ</h2>
<ul>
<li>
<p>ÂøÖÈ†àÂÖàÂú®ÂïüÂãïÈ°û <code>@EnableRabbit</code>ÔºåÊé•ËëóÂú®Ë¶ÅÊî∂Ë®äÊÅØÁöÑÊñπÊ≥ïÊàñÈ°û‰∏äË®ªËß£<code>@RabbitListener(queues={&quot;hello-queue&quot;})</code></p>
<ul>
<li>Ê≥®ÊÑèÁõ£ËÅΩÁöÑÊòØ‰∏ÄÂÄãqueue</li>
</ul>
</li>
<li>
<p>Áï∂ÊúâË®ªËß£‰∫ÜÊé•Êî∂ÁöÑÊñπÊ≥ïÊàñÈ°ûÔºåÂè™Ë¶ÅÊúçÂãô‰∏ÄÂïüÂãïÂ∞±ÊúÉÈÄ£‰∏äÊ∂àÊÅØ‰∏≠ÂøÉÔºåÈñãÂßãÂòóË©¶Êé•Êî∂</p>
</li>
<li>
<p>ÊúÄÂéüÂßãÁöÑÊé•Êî∂ÔºåÊî∂Âà∞ÁöÑÊòØMessageÈ°û</p>
<ul>
<li><code>org.springframework.amqp.core.Message</code></li>
<li>Áî®getBosyÊñπÊ≥ïÊãøÂá∫ÊµÅÂåñÁöÑÁâ©‰ª∂</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@RabbitListener</span>(queues = {<span style="color:#cd5555">&#34;hello-queue&#34;</span>})
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">receiveMsg</span>(Message message) {
    <span style="color:#00688b;font-weight:bold">byte</span>[] body = message.<span style="color:#658b00">getBody</span>();
    MessageProperties messageProperties = message.<span style="color:#658b00">getMessageProperties</span>();
    System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(body);
    System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;Ë®äÊÅØÈ†≠=&#34;</span> + messageProperties);
}
</code></pre></div><ul>
<li>ÂèØ‰ª•ÊääbodyÂèñÂá∫‰æÜÔºåÁÑ∂ÂæåÂæûÈ†≠ÁöÑË≥áË®ä‰∏≠Êâæ<code>__TypeId__</code>Á¢∫ÂÆöÈ°ûÔºåÂÜçËá™Â∑±JSON.parseÂõûÂéªÊàêÁÇ∫‰∏ÄÂÄãÁâ©‰ª∂</li>
</ul>
<p><img src="image-20220127195128933.png" alt="image-20220127195128933"></p>
<ul>
<li>‰ΩÜÂÖ∂ÂØ¶Âú®ÊñπÊ≥ïÁöÑÂÖ•ÂèÉËÅ≤ÊòéÈ°ûÂ∞±ÂèØ‰ª•Áõ¥Êé•ÂèñÂà∞ÂèçÂ∞ÑÂåÖÂ•ΩÁöÑÁâ©‰ª∂‰∫Ü</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@RabbitListener</span>(queues = {<span style="color:#cd5555">&#34;hello-queue&#34;</span>})
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">receiveMsg</span>(RefundInfoEntity content,
                Channel channel) {
    System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(content);
}
</code></pre></div><ul>
<li><code>@RabbitListener</code>ÂèØ‰ª•Áî®Âú®È°ûÊàñÊñπÊ≥ïÔºåÈÇÑÊúâ‰∏ÄÂÄã<code>@RabbitHandler</code>Âè™ËÉΩÁî®Âú®ÊñπÊ≥ï‰∏äÔºåÂèØ‰ª•Á¥∞ÂàÜËôïÁêÜ‰∏çÂêåÁöÑË®äÊÅØ</li>
<li>‰æãÂ¶Ç‰∏ÄÂÄãqueue‰∏≠ÊúâÂ§öÁ®ÆË®äÊÅØÔºåAÈ°ûÂéªÊñπÊ≥ï1ÔºåBÈ°ûÂéªÊñπÊ≥ï2</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@RabbitHandler</span>
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">ÊñπÊ≥ï1</span>(AÈ°û a){...}

<span style="color:#707a7c">@RabbitHandler</span>
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">ÊñπÊ≥ï2</span>(BÈ°û b){...}
</code></pre></div><h1 id="Ë®äÊÅØÁ¢∫Ë™ç">Ë®äÊÅØÁ¢∫Ë™ç</h1>
<ul>
<li>‰øùË≠âÊ∂àÊÅØ‰∏ç‰∏üÂ§±ÔºåÂèØ‰ª•‰ΩøÁî®‰∫ãÂãôÂåÖ‰ΩèÊï¥Ê¢ùÂÇ≥ÈÅûÂ∫èÂàóÔºå‰ΩÜÊÄßËÉΩ‰∏ãÈôç250ÂÄç</li>
</ul>
<p><img src="1598625968345.png" alt="1598625968345"></p>
<ul>
<li>Áî®ÂàÜÊÆµÁ¢∫Ë™çÊ©üÂà∂Â∞±‰∏çÊúÉÈÇ£È∫ºÂö¥ÈáçÊêçÂ§±ÊÄßËÉΩ</li>
</ul>
<h2 id="Á¨¨‰∏ÄÊÆµpb">Á¨¨‰∏ÄÊÆµP&gt;B</h2>
<ul>
<li>publisher confirmCallback: ÂëäË®¥‰Ω†Ë®äÊÅØÊúâÈÄÅÈÄ≤Ë®äÊÅØ‰∏≠ÂøÉ</li>
<li>application.properties</li>
</ul>
<pre tabindex="0"><code class="language-properties" data-lang="properties"># ÈñãÂïìÁôºÈÄÅÁ¢∫Ë™çÔºåÁ¢∫ÂÆöÊúâÈÄÅÂà∞Broker
spring.rabbitmq.publisher-confirm-type=correlated
</code></pre><ul>
<li>ÂèØ‰ª•Ëá™Ë®ÇRabbitTemplate‰∏≠ÁöÑconfirmÊñπÊ≥ï</li>
<li>MyRabbitConfig.java</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Autowired</span>
RabbitTemplate rabbitTemplate;

<span style="color:#707a7c">@PostConstruct</span> <span style="color:#228b22">// RabbitTemplateÁâ©‰ª∂ÂâµÂª∫‰πãÂæåÂü∑Ë°åÊ≠§ÊñπÊ≥ï
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">initRabbitTemplate</span>() {
    rabbitTemplate.<span style="color:#658b00">setConfirmCallback</span>(<span style="color:#8b008b;font-weight:bold">new</span> RabbitTemplate.<span style="color:#658b00">ConfirmCallback</span>() {
        <span style="color:#228b22">/**
</span><span style="color:#228b22">         * Ë®äÊÅØÊúâÈÄÅÂà∞Ë®äÊÅØ‰∏≠ÂøÉÂ∞±Âü∑Ë°åÊ≠§ÊñπÊ≥ï
</span><span style="color:#228b22">         * @param correlationData Ê∂àÊÅØÁöÑÂîØ‰∏ÄÈóúËÅØÊï∏ÊìöÔºåÂèØ‰ª•Ë¶ñÁÇ∫Ê∂àÊÅØid
</span><span style="color:#228b22">         * @param b ÊòØÂê¶ÈÄÅÈÅî
</span><span style="color:#228b22">         * @param s Â§±ÊïóÂéüÂõ†
</span><span style="color:#228b22">         */</span>
        <span style="color:#707a7c">@Override</span>
        <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">confirm</span>(CorrelationData correlationData, <span style="color:#00688b;font-weight:bold">boolean</span> b, String s) {
            System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;Ë®äÊÅØ&#34;</span>+correlationData+<span style="color:#cd5555">&#34;Â∑≤ÈÄÅÈÅî‰∏≠ÂøÉ&#34;</span>);

        }
    });
}
</code></pre></div><h2 id="Á¨¨‰∫åÊÆµeq">Á¨¨‰∫åÊÆµE&gt;Q</h2>
<ul>
<li>
<p>publisher returnCallback: ÂëäË®¥‰Ω†Ë®äÊÅØÂú®‰∫§ÊèõÊ©üË¶ÅÂéªÈöäÂàóÊôÇÂá∫‰∫ã‰∫Ü</p>
</li>
<li>
<p>application.properties</p>
</li>
</ul>
<pre tabindex="0"><code class="language-properties" data-lang="properties"># ÈñãÂïìÁôºÈÄÅÁ¢∫Ë™çÔºåÁ¢∫ÂÆöÁ∂ìÈÅé‰∫§ÊèõÊ©üÊäµÈÅîQueue
spring.rabbitmq.publisher-returns=true
# Âè™Ë¶ÅÊäµÈÅîQueueÔºåÁî®Áï∞Ê≠•Ê®°ÂºèÂÑ™ÂÖàÂõûË™øreturn confirm
spring.rabbitmq.template.mandatory=true
</code></pre><ul>
<li>MyRabbitConfig.java
<ul>
<li>Ê≥®ÊÑèÈÄôÊòØÂ¶ÇÊûúÊ≤íÈÄ≤ÈöäÂàóÊôÇÔºåË™øÁî®ÁöÑÊñπÊ≥ï</li>
<li>ÂâçÈù¢P&gt;BÊòØÈÄÅÈÄ≤‰∏≠ÂøÉÁöÑÂ∑≤ËÆÄÔºåÈÄôÈÇäÊòØE&gt;QÂá∫‰∫ãÁöÑË≠¶Â†±</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">rabbitTemplate.<span style="color:#658b00">setReturnCallback</span>(<span style="color:#8b008b;font-weight:bold">new</span> RabbitTemplate.<span style="color:#658b00">ReturnCallback</span>() {
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">returnedMessage</span>(Message message, <span style="color:#00688b;font-weight:bold">int</span> i, String s, String s1, String s2) {
        <span style="color:#228b22">// Â¶ÇÊûúÊ≤íÊúâÂà∞queueÔºåË¶ÅËøîÂõûÈÄô‰∫õË®äÊÅØ
</span><span style="color:#228b22"></span>    }
});
</code></pre></div><h2 id="Á¨¨‰∏âÊÆµ-Ê∂àË≤ªÁ´Ø">Á¨¨‰∏âÊÆµ Ê∂àË≤ªÁ´Ø</h2>
<ul>
<li>
<p>Ê∂àË≤ªÁ´ØÁ¢∫Ë™çÊ©üÂà∂: Ê∂àË≤ªËÄÖÊî∂Âà∞Ê∂àÊÅØÔºåÁµ¶‰º∫ÊúçÂô®ÁôºÈÄÅÁ¢∫Ë™çÔºå‰º∫ÊúçÂô®Âà™Èô§Ë©≤Ê∂àÊÅØ</p>
</li>
<li>
<p>consumer ack: ËÆìBrokerÁü•ÈÅìÂì™‰∫õÊ∂àÊÅØË¢´Ê∂àË≤ªËÄÖÊ≠£Á¢∫Ê∂àË≤ª‰∫ÜÔºàÂ¶ÇÊûúÊ≤íÊúâÂâáÈáçÊñ∞ÊäïÈÅûÔºâ</p>
<ul>
<li>È†êË®≠ÊòØautoÔºåÂÆ¢Êà∑Á´ØÂè™Ë¶ÅÊé•Êî∂Âà∞Ê∂àÊÅØÂ∞±ÊúÉËá™ÂãïÁ¢∫Ë™çÔºåÊúçÂãôÁ´ØÂ∞±ÁßªÈô§ÈÄôÂÄãÊ∂àÊÅØ</li>
<li>ÊúÉÈÄ†ÊàêÂïèÈ°åÔºåÊØîÂ¶ÇÊüêÊ®°ÁµÑ‰∏ÄÊé•Âà∞Ê∂àÊÅØÔºåÈÇÑÂú®ËôïÁêÜÂ∞±Áï∂Ê©ü‰∫ÜÔºåÁµêÊûúÂ∞±ÈÄ†Êàê‰∏üÂ§±</li>
</ul>
</li>
<li>
<p>ÈñãÂïüÊâãÂãïÁ¢∫Ë™çÔºåË®≠ÂÆöapplication.properties</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties"># ‰ΩøÁî®ÊâãÂãïÁ¢∫Ë™çÊ®°ÂºèÔºåÈóúÈñâËá™ÂãïÁ¢∫Ë™çÔºåÈò≤Ê≠¢Ê∂àÊÅØ‰∏üÂ§±
spring.rabbitmq.listener.simple.acknowledge-mode=manual
</code></pre></li>
<li>
<p>ËôïÁêÜ‰∏ÄÂÄãÂÆåÊâçÁ¢∫Ë™ç‰∏ÄÂÄãÔºåÊ≤íËôïÁêÜÂÆå‰øùÊåÅÂú®Êú™Á∞ΩÊî∂(Unacked)ÁãÄÊÖãÔºåËã•Áï∂Ê©üÂâáÊúÉ‰ΩøÊ∂àÊÅØÈáçÊñ∞ÈÄ≤ÂÖ•readyÁãÄÊÖãÔºå‰∏çÊúÉ‰∏üÂ§±</p>
</li>
</ul>
<p><img src="image-20220127205156239.png" alt="image-20220127205156239"></p>
<h3 id="Á∞ΩÊî∂">Á∞ΩÊî∂</h3>
<ul>
<li>‰ΩøÁî®<code>channel.basicAck(deliveryTag, false)</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@RabbitListener</span>(queues = {<span style="color:#cd5555">&#34;hello-queue&#34;</span>})
<span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">receiveMsg</span>(Message message,
                RefundInfoEntity content,
                Channel channel) {
    System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(content);
    <span style="color:#228b22">// deliveryTagÂú®channelÂÖßÊåâÈ†ÜÂ∫èËá™Â¢û
</span><span style="color:#228b22"></span>    <span style="color:#00688b;font-weight:bold">long</span> deliveryTag = message.<span style="color:#658b00">getMessageProperties</span>().<span style="color:#658b00">getDeliveryTag</span>();
    <span style="color:#228b22">// ÊâãÂãïÁ∞ΩÊî∂ÔºåÂæåÈù¢ÁöÑfalse = ÈùûÊâπÈáèÊ®°Âºè
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">try</span> {
        channel.<span style="color:#658b00">basicAck</span>(deliveryTag, <span style="color:#8b008b;font-weight:bold">false</span>);
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;Á∞ΩÊî∂ÔºåÂñÆÊìöÊµÅÊ∞¥Ëôü=&#34;</span> + deliveryTag);
    } <span style="color:#8b008b;font-weight:bold">catch</span> (IOException e) {
        <span style="color:#228b22">// Á∞ΩÊî∂Â§±ÊïóÔºå‰æãÂ¶ÇÁ∂≤Ë∑ØÁï∞Â∏∏
</span><span style="color:#228b22"></span>        e.<span style="color:#658b00">printStackTrace</span>();
    }
}
</code></pre></div><h3 id="ÊãíÊî∂">ÊãíÊî∂</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">// ÊãíÊî∂ÔºåÂèÉÊï∏ÊòØ: ÊµÅÊ∞¥Ëôü, ÊâπÊ¨°, ÈáçÊñ∞ÂÖ•ÈöäÂàó
</span><span style="color:#228b22"></span>channel.<span style="color:#658b00">basicNack</span>(deliveryTag, <span style="color:#8b008b;font-weight:bold">false</span>, <span style="color:#8b008b;font-weight:bold">false</span>); <span style="color:#228b22">// ÈÄôÊ®£ÊúÉ‰∏üÊ£Ñ
</span><span style="color:#228b22"></span>
<span style="color:#228b22">// ÈáçÊñ∞ÂÖ•ÈöäÂàó=trueÁöÑË©±ÔºåË®äÊÅØÊúÉÈáçÊñ∞ÂõûÂà∞ÈöäÂàó
</span><span style="color:#228b22"></span>channel.<span style="color:#658b00">basicNack</span>(deliveryTag, <span style="color:#8b008b;font-weight:bold">false</span>, <span style="color:#8b008b;font-weight:bold">true</span>);
<span style="color:#228b22">// Á≠âÂêåÊñº
</span><span style="color:#228b22"></span>channel.<span style="color:#658b00">basicReject</span>(deliveryTag, <span style="color:#8b008b;font-weight:bold">false</span>);
</code></pre></div><h2 id="ÊúÄÁµÇÊñπÊ°à">ÊúÄÁµÇÊñπÊ°à</h2>
<ul>
<li>
<p>Á¢∫Ë™çÊ©üÂà∂ + Êú¨Âú∞‰∫ãÂãôË°®</p>
<ul>
<li>ÁôºÈÄÅÊ∂àÊÅØÁöÑÊôÇÂÄôÁîüÊàêÊ∂àÊÅØIDÔºåÁÑ∂ÂæåÂú®ÂõûË™øÊñπÊ≥ï‰øÆÊîπÊï∏ÊìöÂ∫´‰∏≠Ê∂àÊÅØÁöÑÁãÄÊÖã</li>
<li>ÂÆöÊôÇÊéÉÊèèÊï∏ÊìöÂ∫´Ê∂àÊÅØÁöÑÁãÄÊÖãÔºåÊ≤íÊúâÊàêÂäüÁöÑÈáçÊñ∞ÊäïÈÅû‰∏ÄÊ¨°</li>
<li>Ê∂àË≤ªÊ∂àÊÅØÊôÇ‰ΩøÁî®ÊâãÂãïÁ∞ΩÊî∂Ê©üÂà∂(‰∏ç‰ΩøÁî®Ëá™ÂãïÁ∞ΩÊî∂)</li>
</ul>
</li>
</ul>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">‰∏äÊ¨°‰øÆÊîπÊñº 2022-02-04</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://yoziming.github.io/post/220205-gulimall-19/">
			‰∏ã‰∏ÄÁØá<br>Á¢∫Ë™çË®ÇÂñÆ„ÄÅfeignË´ãÊ±ÇÈ†≠ÂïèÈ°å
                </a>
                
                
                
                <a class="older-posts" href="https://yoziming.github.io/post/220203-gulimall-17-offline-cart/">
			‰∏ä‰∏ÄÁØá<br>cookie&amp;redisÂØ¶ÁèæË®™ÂÆ¢Ë≥ºÁâ©Ëªä
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="waline"></div>
<script>
    new Waline({
        el: '#waline',
        path: location.pathname,
        serverURL: "https://waline-pn38gfwbz-yoziming.vercel.app/" ,
		lang: 'en-US',
		visitor: true,
		meta: ['nick', 'mail'],
    });
    </script>



            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
ÁßªÊ§çËá™ <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Yoziming
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
